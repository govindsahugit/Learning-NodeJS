#!/usr/bin/env node
import fs from "node:fs/promises";

const filePath = process.argv[2];
const word = process.argv[3];
let count = 0;

const fileContent = await fs.readFile(filePath, "utf-8");
// console.log(fileContent);

const words = fileContent.split(/[\W]/).filter((w) => w);

const wordCount = {};
words.forEach((w) => {
  if (w in wordCount) {
    wordCount[w] += 1;
  } else {
    wordCount[w] = 1;
  }
  if (word) {
    if (word === w.toLowerCase()) count++;
  } else {
    count++;
  }
});

console.log(wordCount);
console.log(count);
